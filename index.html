<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Introduction to Sailing with Interactive Visualizaitons</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://d3js.org/topojson.v3.min.js"></script>
<style>
    .country {
            stroke: #000;
            stroke-width: 0.5px;
        }
        .legend {
            display: inline-block;
            vertical-align: middle;
            background-color: rgba(255, 255, 255, 0.8);
            border: 1px solid #ccc;
            padding: 10px;
        }

        .legend-item {
            display: inline-block;
            margin-bottom: 5px;
        }
    .container {
        display: flex;
        flex-wrap: wrap;
        justify-content: left;
        align-items: center;
        margin-top: 20px;
    }

    .box {
        border: 2px solid black;
        width: 287px;
        height: 287px;
        margin: 15px;
        position: relative;
    }

    .drop-box {
        border: 2px solid black;
        width: 150px; 
        height: 50px; 
        position: relative; 
        bottom: -10px; 
        left: 50%; 
        transform: translateX(-50%);
        text-align: center;
        line-height: 50px;
        font-size: 20px;
    }

    .term-box {
        border: 2px solid black;
        background-color: white;
        width: 150px;
        height: 50px;
        margin: 10px;
        position: relative;
        cursor: pointer;
        text-align: center;
        line-height: 50px;
        font-size: 20px;
    }

    .wide-box {
        width: 913px;
        height: 289px; 
        justify-content: center;
    }

    .row {
        display: flex;
        justify-content: space-between;
        width: 100%;
        margin-bottom: 100px; 
    }

    .row:last-child {
        margin-bottom: 0; 
    }
    #term-box {
        display: flex; 
        justify-content: center; 
        align-items: center; 
        flex-wrap: wrap; 
        padding: 10px; 
        background-color: #a4c2f4ff; 
        border-radius: 8px;
    }
    #top-row {
        display: flex; 
        justify-content: center; 
        align-items: center;
        padding-bottom: 80px;
    }
    #middle-row {
        display: flex; 
        justify-content: center; 
        align-items: center;
        padding-bottom: 80px;
    }
    #bottom-row {
        display: flex; 
        justify-content: center; 
        align-items: center;
        padding-bottom: 80px;
    }
</style>
</head>
<body>
    <h1>Olympic Sailing Over Time</h1>
    <div style="display: inline-block; vertical-align: middle;">
        <label for="year">Select Year: </label>
        <input type="range" id="year" min="1908" max="2020" step="4" value="1908"/>
        <span id="selectedYear">1908</span>
    </div>
    <div class="legend">
        <div class="legend-item"><span style="background-color:#f7fbff;">&nbsp;&nbsp;&nbsp;&nbsp;</span> 0</div>
        <div class="legend-item"><span style="background-color:#c6dbef;">&nbsp;&nbsp;&nbsp;&nbsp;</span> 5</div>
        <div class="legend-item"><span style="background-color:#6baed6;">&nbsp;&nbsp;&nbsp;&nbsp;</span> 10</div>
        <div class="legend-item"><span style="background-color:#2171b5;">&nbsp;&nbsp;&nbsp;&nbsp;</span> 15</div>
        <div class="legend-item"><span style="background-color:#08306b;">&nbsp;&nbsp;&nbsp;&nbsp;</span> 20+</div>
    </div>
    <script>
        const width = 900;
        const height = 600;

        const svg = d3.select('body').append('svg').attr('width', width).attr('height', height);

        const projection = d3.geoMercator().scale(140).translate([width / 2, height / 1.4]);
        const path = d3.geoPath(projection);

        const g = svg.append('g');

        // Load the map data
        d3.json('https://cdn.jsdelivr.net/npm/world-atlas@2/countries-110m.json')
            .then(data => {
                const countries = topojson.feature(data, data.objects.countries);

                g.selectAll('path')
                    .data(countries.features)
                    .enter().append('path')
                    .attr('class', 'country')
                    .attr('d', path);

                // Load the competitors data
                d3.json('competitors.json')
                    .then(competitorsData => {
                        // Create a color scale
                        const colorScale = d3.scaleSequential(d3.interpolateBlues).domain([0, 25]);

                        // Function to update the map colors based on the selected year
                        function updateMap(year) {
                            g.selectAll('.country')
                                .attr('fill', d => {
                                    const countryName = d.properties.name;
                                    const competitors = competitorsData[year][countryName] || 0;
                                    return colorScale(competitors);
                                });

                            // Update selected year text
                            document.getElementById('selectedYear').innerText = year;
                        }

                        // Add event listener to the slider
                        const slider = document.getElementById('year');
                        slider.addEventListener('input', function() {
                            const year = this.value;
                            updateMap(year);
                        });

                        // Initial map update
                        updateMap(slider.value);
                    })
                    .catch(error => console.log(error));
            })
            .catch(error => console.log(error));
    </script>
    <h1>Basic Racing Rules Matching Game</h1>
    <div>
        <b>Rule Descriptions:</b>
        <ul>
            <li>Rule 10 - on opposite tacks. Port keeps clear of starboard</li>
            <li>Rule 11 - on same tack, overlapped. Windward keeps clear of leeward</li>
            <li>Rule 12 - on same tack, not overlapped. Boat clear astern keeps clear of boat clear ahead</li>
            <li>Rule 13 - while tacking. Until the boat is on close haul of her completed tack, she must keep clear of other boats (rules 10-12 do not apply)</li>
            <li>Rule 14 - avoid collision</li>
            <li>Rule 31 - donâ€™t hit marks</li>
        </ul>
    </div>

<div id="term-box" class="container">
    <div class="term-box" draggable="true" ondragstart="drag(event)">Rule 10</div>
    <div class="term-box" draggable="true" ondragstart="drag(event)">Rule 11</div>
    <div class="term-box" draggable="true" ondragstart="drag(event)">Rule 12</div>
    <div class="term-box" draggable="true" ondragstart="drag(event)">Rule 13</div>
    <div class="term-box" draggable="true" ondragstart="drag(event)">Rule 14</div>
    <div class="term-box" draggable="true" ondragstart="drag(event)">Rule 31</div>
</div>

<div id='top-row' class="container">
    <div class="box wide-box" ondrop="drop(event)" ondragover="allowDrop(event)">
        <img src="rule13.jpg" alt="Rule 13">
        <div id="drop-box4" class="drop-box" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
    </div>
</div>

<div id='middle-row' class="container">
    <div class="box" ondrop="drop(event)" ondragover="allowDrop(event)">
        <img src="rule10.jpg" alt="Rule 10">
        <div id="drop-box1" class="drop-box" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
    </div>
    <div class="box" ondrop="drop(event)" ondragover="allowDrop(event)">
        <img src="rule31.jpg" alt="Rule 31">
        <div id="drop-box6" class="drop-box" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
    </div>
</div>

<div id='bottom-row' class="container">
    <div class="box" ondrop="drop(event)" ondragover="allowDrop(event)">
        <img src="rule11.jpg" alt="Rule 11">
        <div id="drop-box2" class="drop-box" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
    </div>
    <div class="box" ondrop="drop(event)" ondragover="allowDrop(event)">
        <img src="rule12.jpg" alt="Rule 12">
        <div id="drop-box3" class="drop-box" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
    </div>
    <div class="box" ondrop="drop(event)" ondragover="allowDrop(event)">
        <img src="rule14.jpg" alt="Rule 14">
        <div id="drop-box5" class="drop-box" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
    </div>
</div>
</body>
</html>